---
title: Mongosh
---

# Mongosh


## Pierwsze kroki
| Komenda             | Opis                                                             |
| ------------------- | ---------------------------------------------------------------- |
| `show dbs`          | Wywietla wszystkie istniejce bazy danych                       |
| `db`                | Pokazuje, w jakiej bazie danych aktualnie pracujesz              |
| `use mojaBaza`      | Przecza si do wybranej bazy lub tworzy j, jeli nie istnieje |
| `db.dropDatabase()` | Usuwa **aktualnie wybran** baz danych                          |


```
show dbs
db
use shopDB
db.dropDatabase()
```


## Tworzenie kolekcji i dokument贸w

### Jawne utworzenie kolekcji
`db.createCollection("shop")`

### Automatyczne tworzenie kolekcji podczas dodawania dokumentu
`db.users.insertOne({ name: "Jurek", age: 20 })`

### Wywietlanie kolekcji w danej bazie
`show collections`


### Dodawanie wielu dokument贸w naraz
```
db.users.insertMany([
{ name: "Joe", age: 11 },
{ name: "Zosia", age: 22 },
{ name: "x23", age: 214 }
])
```

### Pobieranie danych (READ)
#### Pobieranie wszystkich dokument贸w
`db.users.find()`

### Pobranie jednego dokumentu
`db.users.findOne({ name: "Jurek" })`

### Warunki wyszukiwania
`db.users.find({ age: { $gt: 20 }})           // wiek > 20`
`db.users.find({ age: { $gt: 10, $lt: 30 }})  // 10 < wiek < 30`

### Operatory

#### Operatory por贸wnania (*Comparison Operators*)
| Operator | Znaczenie / Opis                  | Przykad u偶ycia                        |
| -------- | --------------------------------- | -------------------------------------- |
| `$eq`    | r贸wne                             | `{ age: { $eq: 18 }}`                  |
| `$ne`    | nie r贸wne                         | `{ age: { $ne: 18 }}`                  |
| `$gt`    | wiksze ni偶                       | `{ age: { $gt: 18 }}`                  |
| `$gte`   | wiksze lub r贸wne                 | `{ age: { $gte: 18 }}`                 |
| `$lt`    | mniejsze ni偶                      | `{ age: { $lt: 18 }}`                  |
| `$lte`   | mniejsze lub r贸wne                | `{ age: { $lte: 18 }}`                 |
| `$in`    | warto z listy                   | `{ platform: { $in: ["PC","Xbox"] }}`  |
| `$nin`   | warto nie znajduje si w licie | `{ platform: { $nin: ["PC","Xbox"] }}` |


#### Operatory logiczne (*Logical Operators*)
| Operator | Znaczenie / Opis                             | Przykad u偶ycia                                       |
| -------- | -------------------------------------------- | ----------------------------------------------------- |
| `$and`   | oba warunki musz by spenione              | `{ $and: [ {age: {$gt: 18}}, {city: "Olsztyn"} ] }`   |
| `$or`    | co najmniej jeden warunek musi by speniony | `{ $or: [ {age: {$lt: 10}}, {age: {$gt: 60}} ] }`     |
| `$nor`   | 偶aden z warunk贸w nie mo偶e by speniony      | `{ $nor: [ {city: "Olsztyn"}, {city: "Warszawa"} ] }` |
| `$not`   | negacja warunku                              | `{ age: { $not: { $gt: 30 } } }`                      |

#### Operatory aktualizacji (*Update Operator*)
| Operator    | Znaczenie / Opis                                        | Przykad u偶ycia                                                        |
| ----------- | ------------------------------------------------------- | ---------------------------------------------------------------------- |
| `$set`      | ustawia lub nadpisuje warto pola                      | `db.users.updateOne({name:"Joe"}, { $set: {age: 25} })`                |
| `$inc`      | zwiksza lub zmniejsza warto liczbow pola            | `db.users.updateMany({}, { $inc: {age: 1} })`                          |
| `$unset`    | usuwa pole z dokumentu                                  | `db.users.updateOne({_id: id}, { $unset: {city: ""} })`                |
| `$rename`   | zmienia nazw pola                                      | `db.users.updateMany({}, { $rename: {"age": "wiek"} })`                |
| `$push`     | dodaje element do tablicy                               | `db.users.updateOne({name:"Joe"}, { $push: {hobbies: "gaming"} })`     |
| `$pull`     | usuwa element z tablicy (jeli spenia warunek)         | `db.users.updateOne({name:"Joe"}, { $pull: {hobbies: "gaming"} })`     |
| `$pop`      | usuwa ostatni (`1`) lub pierwszy (`-1`) element tablicy | `db.users.updateOne({name:"Joe"}, { $pop: {hobbies: 1} })`             |
| `$addToSet` | dodaje element do tablicy **tylko jeli go nie ma**     | `db.users.updateOne({name:"Joe"}, { $addToSet: {hobbies: "coding"} })` |
| `$mul`      | mno偶y warto liczbow pola                             | `db.products.updateOne({_id: id}, { $mul: {price: 1.1} })`             |
| `$min`      | ustawia warto pola, jeli jest mniejsza               | `db.stats.updateOne({_id: id}, { $min: {highscore: 300} })`            |
| `$max`      | ustawia warto pola, jeli jest wiksza                | `db.stats.updateOne({_id: id}, { $max: {highscore: 300} })`            |






### Projekcja i filtrowanie zwracanych p贸l

Funkcja: `db.collection.find(<filter>, <projection>)`
    - filter okrela, kt贸re dokumenty pobra
  - projection  okrela, kt贸re pola zwr贸ci
Przykad:
```
db.users.find(
    { age: { $gt: 18 }},        // filter
    { name: 1, age: 1, _id: 0 } // projection
)
```

### Zliczanie dokument贸w
Policzenie wszystkich:
`db.users.countDocuments()`

Policzenie z filtrem:
`db.users.countDocuments({ age: { $gt: 18 } })`


















