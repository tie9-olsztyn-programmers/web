"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[4554],{6020:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"ExpressJS/Express/RetroGamesDB/MetodaPOST","title":"Metoda POST","description":"Definicja","source":"@site/docs/3. ExpressJS/50.Express/20.RetroGamesDB/60.MetodaPOST.mdx","sourceDirName":"3. ExpressJS/50.Express/20.RetroGamesDB","slug":"/ExpressJS/Express/RetroGamesDB/MetodaPOST","permalink":"/web/docs/ExpressJS/Express/RetroGamesDB/MetodaPOST","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/3. ExpressJS/50.Express/20.RetroGamesDB/60.MetodaPOST.mdx","tags":[],"version":"current","sidebarPosition":60,"frontMatter":{"title":"Metoda POST"},"sidebar":"tutorialSidebar","previous":{"title":"Metoda GET","permalink":"/web/docs/ExpressJS/Express/RetroGamesDB/MetodaGET"},"next":{"title":"Atualizacja `PUT`, `PATCH`","permalink":"/web/docs/ExpressJS/Express/RetroGamesDB/Aktualizacja"}}');var i=s(4848),a=s(8453);const r={title:"Metoda POST"},d="Metoda POST",t={},c=[{value:"Definicja",id:"definicja",level:2},{value:"Middleware <code>app.use(express.json())</code> w dzia\u0142aniu POST",id:"middleware-appuseexpressjson-w-dzia\u0142aniu-post",level:2},{value:"Dopiszmy metod\u0119 <code>POST</code> do naszego endpointu <code>/games</code>",id:"dopiszmy-metod\u0119-post-do-naszego-endpointu-games",level:2}];function l(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"metoda-post",children:"Metoda POST"})}),"\n",(0,i.jsx)(n.h2,{id:"definicja",children:"Definicja"}),"\n",(0,i.jsx)(n.p,{children:"Co to jest metoda POST"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Metoda POST s\u0142u\u017cy do wysy\u0142ania danych z klienta (np. przegl\u0105darki, aplikacji) do serwera."}),"\n",(0,i.jsx)(n.li,{children:"Najcz\u0119\u015bciej u\u017cywa si\u0119 jej, gdy chcemy doda\u0107 nowy zas\xf3b (np. now\u0105 gr\u0119, u\u017cytkownika, komentarz)."}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsxs)(n.mdxAdmonitionTitle,{children:[(0,i.jsx)(n.strong,{children:"Metafora"}),"*:"]}),(0,i.jsx)(n.p,{children:"Wyobra\u017a sobie, \u017ce:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"serwer Express to biuro przyj\u0119\u0107 zam\xf3wie\u0144 w restauracji"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"GET"})," przychodzisz i m\xf3wisz: \u201ePoka\u017c mi menu.\u201d"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"POST"})," m\xf3wisz: \u201eOto moje zam\xf3wienie \u2014 zapisz je w systemie.\u201d"]}),"\n",(0,i.jsxs)(n.li,{children:["Czyli: ",(0,i.jsx)(n.code,{children:"POST"})," = \u201eWy\u015blij dane do serwera, \u017ceby co\u015b nowego powsta\u0142o lub zosta\u0142o zapisane.\u201d"]}),"\n"]})]}),"\n",(0,i.jsxs)(n.h2,{id:"middleware-appuseexpressjson-w-dzia\u0142aniu-post",children:["Middleware ",(0,i.jsx)(n.code,{children:"app.use(express.json())"})," w dzia\u0142aniu POST"]}),"\n",(0,i.jsxs)(n.p,{children:["Za\u0142\xf3\u017cmy, \u017ce ",(0,i.jsx)(n.code,{children:"client"})," wysy\u0142a ",(0,i.jsx)(n.code,{children:"request"})," z metod\u0105 ",(0,i.jsx)(n.code,{children:"POST"}),".\nPod ",(0,i.jsx)(n.em,{children:"endpoint"})," ",(0,i.jsx)(n.code,{children:"/games"})," metod\u0105 ",(0,i.jsx)(n.code,{children:"POST"})," s\u0105 przesy\u0142ane dane w formacie JSON:\n(Dodajmy ten kod do naszego pliku ",(0,i.jsx)(n.code,{children:".http"}),".)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",metastring:"request",children:'POST /games\nContent-Type: application/json\n\n{\n  "title": "Doom",\n  "year": 1993,\n  "platform": "PC",\n  "genre": "Shooter"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["W naszej aplikacji mamy uruchomionego middleware: ",(0,i.jsx)(n.code,{children:"app.use(express.json());"}),"\nPe\u0142ni on funkcj\u0119 t\u0142umacza mi\u0119dzy sieci\u0105 a nasz\u0105 aplikacj\u0105.\nDzia\u0142a on w nast\u0119puj\u0105cy spos\xf3b:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Odbiera surowe dane JSON z cia\u0142a \u017c\u0105dania (ci\u0105g znak\xf3w)."}),"\n",(0,i.jsxs)(n.li,{children:["Sprawdza, czy nag\u0142\xf3wek to ",(0,i.jsx)(n.code,{children:"Content-Type = application/json"}),".","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Je\u015bli tak \u2014 automatycznie parsuje (konwertuje) JSON na obiekt JavaScript."}),"\n",(0,i.jsxs)(n.li,{children:["Wstawia ten obiekt do w\u0142a\u015bciwo\u015bci ",(0,i.jsx)(n.code,{children:"req.body"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Przekazuje \u017c\u0105danie dalej (",(0,i.jsx)(n.code,{children:"next()"}),"), ju\u017c z gotowymi danymi."]}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"dopiszmy-metod\u0119-post-do-naszego-endpointu-games",children:["Dopiszmy metod\u0119 ",(0,i.jsx)(n.code,{children:"POST"})," do naszego endpointu ",(0,i.jsx)(n.code,{children:"/games"})]}),"\n",(0,i.jsxs)(n.p,{children:["W pliku ",(0,i.jsx)(n.code,{children:"app.ts"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'app.post("/games", (req: Request, res: Response) => {\n    console.log(req.body) // w konsoli podgl\u0105damy warto\u015b\u0107 po dzia\u0142\u0105niu express.json()\n   try{\n        const {title, year, platform, genre} = req.body;\n\n\n        if (!title || !year || !platform || !genre) {\n            return res.status(400).json({message: "Missing required fields"});\n        }\n\n        const newGame: Game = {\n            id: Date.now(),\n            title,\n            year,\n            platform,\n            genre,\n        };\n\n        games.push(newGame); // dodajemy do naszej listy jakby bazy danych\n        res.status(201).json(newGame); // zwracamy nowy obiekt z kodem 201\n    }catch(error){\n        if(error instanceof Error){\n            res.status(500).json({message: error.message});\n        }else{\n            console.error(error);\n        }\n\n    }\n\n})\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Poniewa\u017c zapytanie do serwera z metod\u0105 ",(0,i.jsx)(n.code,{children:"POST"})," ju\u017c napisali\u015bmy, wy\u015blijmy je i sprawd\u017amy,\nczy wszystko dzia\u0142a."]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>d});var o=s(6540);const i={},a=o.createContext(i);function r(e){const n=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);