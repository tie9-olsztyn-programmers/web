"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[6217],{8453:(e,a,n)=>{n.d(a,{R:()=>r,x:()=>d});var s=n(6540);const t={},i=s.createContext(t);function r(e){const a=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(i.Provider,{value:a},e.children)}},9388:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>o,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"ExpressJS/Express/RetroGamesDB/Aktualizacja","title":"Atualizacja `PUT`, `PATCH`","description":"Zasoby mog\u0105 by\u0107 aktualizowane za pomoc\u0119 metod PUT i PATCH.","source":"@site/docs/3. ExpressJS/50.Express/20.RetroGamesDB/70.Aktualizacja.mdx","sourceDirName":"3. ExpressJS/50.Express/20.RetroGamesDB","slug":"/ExpressJS/Express/RetroGamesDB/Aktualizacja","permalink":"/web/docs/ExpressJS/Express/RetroGamesDB/Aktualizacja","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/3. ExpressJS/50.Express/20.RetroGamesDB/70.Aktualizacja.mdx","tags":[],"version":"current","sidebarPosition":70,"frontMatter":{"title":"Atualizacja `PUT`, `PATCH`"},"sidebar":"tutorialSidebar","previous":{"title":"Metoda POST","permalink":"/web/docs/ExpressJS/Express/RetroGamesDB/MetodaPOST"},"next":{"title":"Metoda `DELETE`","permalink":"/web/docs/ExpressJS/Express/RetroGamesDB/MetodaDELETE"}}');var t=n(4848),i=n(8453);const r={title:"Atualizacja `PUT`, `PATCH`"},d="Aktualizacja",o={},c=[{value:"Metoda <code>PUT</code>",id:"metoda-put",level:2},{value:"Destrukturalizacja obiektu",id:"destrukturalizacja-obiektu",level:3},{value:"Definicja trasy z <code>PUT</code>",id:"definicja-trasy-z-put",level:3},{value:"Zapytania do serwera - poprawne",id:"zapytania-do-serwera---poprawne",level:3},{value:"Zapytania do serwera - niepoprawne",id:"zapytania-do-serwera---niepoprawne",level:3},{value:"Metoda <code>PATCH</code>",id:"metoda-patch",level:2},{value:"Metoda <code>Object.assign</code>",id:"metoda-objectassign",level:3},{value:"Definicja trasy z <code>PATCH</code>",id:"definicja-trasy-z-patch",level:3},{value:"Zapytania do serwera",id:"zapytania-do-serwera",level:3}];function l(e){const a={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.header,{children:(0,t.jsx)(a.h1,{id:"aktualizacja",children:"Aktualizacja"})}),"\n",(0,t.jsxs)(a.p,{children:["Zasoby mog\u0105 by\u0107 aktualizowane za pomoc\u0119 metod ",(0,t.jsx)(a.code,{children:"PUT"})," i ",(0,t.jsx)(a.code,{children:"PATCH"}),"."]}),"\n",(0,t.jsxs)(a.table,{children:[(0,t.jsx)(a.thead,{children:(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.th,{children:(0,t.jsx)(a.strong,{children:"Metoda"})}),(0,t.jsx)(a.th,{children:(0,t.jsx)(a.strong,{children:"Typ aktualizacji"})}),(0,t.jsx)(a.th,{children:(0,t.jsx)(a.strong,{children:"Opis dzia\u0142ania"})}),(0,t.jsx)(a.th,{children:(0,t.jsx)(a.strong,{children:"Przyk\u0142ad u\u017cycia"})})]})}),(0,t.jsxs)(a.tbody,{children:[(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:(0,t.jsx)(a.strong,{children:"PUT"})}),(0,t.jsx)(a.td,{children:"Pe\u0142na aktualizacja"}),(0,t.jsxs)(a.td,{children:["Zast\u0119puje ",(0,t.jsx)(a.strong,{children:"ca\u0142y obiekt"})," nowymi danymi. Je\u015bli nie podasz jakiego\u015b pola, zostanie ono usuni\u0119te."]}),(0,t.jsx)(a.td,{children:"Wysy\u0142asz wszystkie pola gry, nawet te, kt\xf3re si\u0119 nie zmieni\u0142y."})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:(0,t.jsx)(a.strong,{children:"PATCH"})}),(0,t.jsx)(a.td,{children:"Cz\u0119\u015bciowa aktualizacja"}),(0,t.jsxs)(a.td,{children:["Zmienia ",(0,t.jsx)(a.strong,{children:"tylko te pola"}),", kt\xf3re zosta\u0142y przes\u0142ane w \u017c\u0105daniu. Pozosta\u0142e dane pozostaj\u0105 bez zmian."]}),(0,t.jsxs)(a.td,{children:["Wysy\u0142asz tylko jedno pole, np. ",(0,t.jsx)(a.code,{children:"rating"}),"."]})]})]})]}),"\n",(0,t.jsxs)(a.h2,{id:"metoda-put",children:["Metoda ",(0,t.jsx)(a.code,{children:"PUT"})]}),"\n",(0,t.jsx)(a.h3,{id:"destrukturalizacja-obiektu",children:"Destrukturalizacja obiektu"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-ts",children:'let dog = {name:"Reksio", age:10}\nlet tmp = {age:0}\n\nlet puppy = {...dog, ...tmp} // { name: "Reksio", age: 0 } dog nadpisywany przez tmp\nlet notPuppy = {...tmp, ...dog} // { age: 10, name: "Reksio" } tmp nadpisywany przez dog\n\nlet dogWithId = {id: 10, ...dog} // { id: 10, name: "Reksio", age: 10 }\n'})}),"\n",(0,t.jsxs)(a.h3,{id:"definicja-trasy-z-put",children:["Definicja trasy z ",(0,t.jsx)(a.code,{children:"PUT"})]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-ts",children:'app.put("/games/:id", (req, res) => {\n    try {\n        const id = Number(req.params.id); // parsowanie id: string -> id: int\n        const index = games.findIndex(g => g.id === id); // zwraca index albo -1\n        if (index === -1) return res.status(404).send("Game not found");\n\n        games[index] = { id, ...req.body }; // nadpisujemy obiekt gry pozostawiamy id bez zmian\n        res.json(games[index]);\n    } catch (error) {\n        console.error("B\u0142\u0105d aktualizacji gry:", error); // Log do konsoli\n        res.status(500).json({ message: "Wewn\u0119trzny b\u0142\u0105d serwera" }); // Odpowied\u017a dla klienta\n    }\n});\n\n'})}),"\n",(0,t.jsx)(a.h3,{id:"zapytania-do-serwera---poprawne",children:"Zapytania do serwera - poprawne"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-http",metastring:"request",children:'\n### aktualizacja przez put\n# zmienimy title, year\nPUT {{baseUrl}}/games/1\nContent-Type: application/json\n\n{\n  "title": "Mario Po Polsku",\n  "year": 3993,\n  "platform": "PC",\n  "genre": "Shooter"\n}\n\n### pytamy o gr\u0119 z indeksem 1\nGET {{baseUrl}}/games/1\nAccept: application/json\n\n'})}),"\n",(0,t.jsx)(a.h3,{id:"zapytania-do-serwera---niepoprawne",children:"Zapytania do serwera - niepoprawne"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-http",metastring:"request",children:'### zapytanie, kt\xf3re zniszczy gr\u0119 id=2\n# chcieli\u015bmy zamieni\u0107 tytu\u0142 na same du\u017ce litery\nPUT {{baseUrl}}/games/2\nContent-Type: application/json\n\n{\n  "title": "PONG"\n}\n\n### sprawdzamy gr\u0119 id=2\nGET {{baseUrl}}/games/2\nAccept: application/json\n'})}),"\n",(0,t.jsxs)(a.h2,{id:"metoda-patch",children:["Metoda ",(0,t.jsx)(a.code,{children:"PATCH"})]}),"\n",(0,t.jsxs)(a.h3,{id:"metoda-objectassign",children:["Metoda ",(0,t.jsx)(a.code,{children:"Object.assign"})]}),"\n",(0,t.jsxs)(a.admonition,{type:"tip",children:[(0,t.jsxs)(a.mdxAdmonitionTitle,{children:["Co to jest ",(0,t.jsx)(a.code,{children:"Object.assign()"}),"?"]}),(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.code,{children:"Object.assign(target, source1, source2, ...)"})}),"\n",(0,t.jsxs)(a.li,{children:["kopiuje w\u0142asne pola z jednego lub wielu obiekt\xf3w \u017ar\xf3d\u0142owych do obiektu docelowego (",(0,t.jsx)(a.code,{children:"target"}),")."]}),"\n"]})]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-ts",children:'let dog = {name:"Reksio", age:10}\nlet objectPuppy = {age: 1, id:20}\nObject.assign(objectPuppy, dog) // { age: 10, id: 20, name: "Reksio" }\n\nlet newDog = Object.assign({}, dog, {age:99}, {age:222}) //{ name: "Reksio", age: 222 }\n\nlet student = {name: "Zdzis\u0142aw", age: 15, class: 3}\nObject.assign(student, {age:16, class:4})\n// student = Object { name: "Zdzis\u0142aw", age: 16, class: 4 }\nlet updatedStudent = Object.assign(student, {age:17, class:5})\n// udpatedStudent = { "name": "Zdzis\u0142aw", "age": 17, "class": 5 }\n\n'})}),"\n",(0,t.jsxs)(a.h3,{id:"definicja-trasy-z-patch",children:["Definicja trasy z ",(0,t.jsx)(a.code,{children:"PATCH"})]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-ts",children:'app.patch("/games/:id", (req, res) => {\n    try{\n        const id = Number(req.params.id);\n        const game = games.find(g => g.id === id);\n        if (!game) return res.status(404).send("Game not found");\n\n        Object.assign(game, req.body); // aktualizacja tylko podanych p\xf3l\n        res.json(game);\n    }catch(error){\n        console.error(error)\n    }\n});\n\n'})}),"\n",(0,t.jsx)(a.h3,{id:"zapytania-do-serwera",children:"Zapytania do serwera"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-http",metastring:"request",children:'\n### Metoda Patch gra id=3\n# zamienimy year na 3984\nPATCH {{baseUrl}}/games/3\nContent-Type: application/json\n\n{\n    "year":3983\n}\n\n### sprawdzamy poprawno\u015b\u0107 zapytania o gr\u0119 id=3\nGET {{baseUrl}}/games/3\nAccept: application/json\n\n### Metoda Patch z niepoprawnym id=9999\nPATCH {{baseUrl}}/games/9999\nContent-Type: application/json\n\n{\n  "year":3984\n}\n\n'})})]})}function p(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);