"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[298],{901:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"MongoDB/Od planu do raportu/Start","title":"Start","description":"Mamy ju\u017c plan architektoniczny (schema.md).","source":"@site/docs/4. MongoDB/110. Od planu do raportu/30.Start.mdx","sourceDirName":"4. MongoDB/110. Od planu do raportu","slug":"/MongoDB/Od planu do raportu/Start","permalink":"/web/docs/MongoDB/Od planu do raportu/Start","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/4. MongoDB/110. Od planu do raportu/30.Start.mdx","tags":[],"version":"current","sidebarPosition":30,"frontMatter":{"title":"Start"},"sidebar":"tutorialSidebar","previous":{"title":"Plan","permalink":"/web/docs/MongoDB/Od planu do raportu/Plan"},"next":{"title":"Raport","permalink":"/web/docs/MongoDB/Od planu do raportu/Raport"}}');var t=a(4848),i=a(8453);const r={title:"Start"},s="Start - zasiewamy ziarno",d={},c=[{value:"Cel etapu",id:"cel-etapu",level:2}];function l(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"start---zasiewamy-ziarno",children:"Start - zasiewamy ziarno"})}),"\n",(0,t.jsx)(e.p,{children:"Mamy ju\u017c plan architektoniczny (schema.md).\nTeraz czas na Start \u2014 czyli wype\u0142nienie naszej bazy danymi, na kt\xf3rych b\u0119dziemy pracowa\u0107.\nZamiast wpisywa\u0107 wszystko r\u0119cznie w konsoli, stworzymy skrypt"}),"\n",(0,t.jsx)(e.h2,{id:"cel-etapu",children:"Cel etapu"}),"\n",(0,t.jsx)(e.p,{children:"Stworzenie powtarzalnego skryptu, kt\xf3ry:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Wyczy\u015bci baz\u0119 z ewentualnych starych danych (reset)."}),"\n",(0,t.jsx)(e.li,{children:"Doda zestaw produkt\xf3w, klient\xf3w i zam\xf3wie\u0144."}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["Napiszemy skrypt ",(0,t.jsx)(e.code,{children:"seed.ts"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:'// 1. Wyb\xf3r bazy danych\ndb = db.getSiblingDB(\'cyber_piekarnia\');\n\n// 2. Czyszczenie kolekcji (Reset przed Startem)\ndb.produkty.drop();\ndb.klienci.drop();\ndb.zamowienia.drop();\n\nconsole.log("--- Start: Inicjalizacja bazy CyberPiekarnia ---");\n\n// 3. Dodawanie produkt\xf3w\ndb.produkty.insertMany([\n    { _id: 1, nazwa: "Chleb Kwantowy", cena: 12.99, skladniki: ["m\u0105ka \u017cytnia", "zakwas"], czy_wege: true, stan_magazynowy: 50 },\n    { _id: 2, nazwa: "Bu\u0142ka z Pr\u0105dem", cena: 4.50, skladniki: ["m\u0105ka pszenna", "cukier"], czy_wege: false, stan_magazynowy: 100 },\n    { _id: 3, nazwa: "Bajgiel Binarny", cena: 7.00, skladniki: ["m\u0105ka", "mak", "sezam"], czy_wege: true, stan_magazynowy: 30 }\n]);\n\n// 4. Dodawanie klient\xf3w (z obiektem preferencji!)\ndb.klienci.insertMany([\n    {\n        _id: 101,\n        login: "kromka_99",\n        email: "jan@cyber.pl",\n        punkty_lojalnosciowe: 250,\n        czy_vip: true,\n        preferencje: { ulubiony_typ: "bu\u0142ki", smak: "s\u0142odki" }\n    },\n    {\n        _id: 102,\n        login: "bajt_master",\n        email: "anna@it.pl",\n        punkty_lojalnosciowe: 50,\n        czy_vip: false,\n        preferencje: { ulubiony_typ: "chleb", smak: "s\u0142ony" }\n    }\n]);\n\n// 5. Dodawanie pierwszego zam\xf3wienia (Relacje)\ndb.zamowienia.insertOne({\n    klient_id: 101,\n    produkty: [1, 2], // Jan kupi\u0142 Chleb Kwantowy i Bu\u0142k\u0119 z Pr\u0105dem\n    data_zakupu: new Date(),\n    kwota_koncowa: 17.49\n});\n\nconsole.log("--- Sukces: Piekarnia gotowa do pracy! ---");\n'})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"W konsoli wpisujemy instrukcj\u0119:"})," ",(0,t.jsx)(e.code,{children:"mongosh seed.js"}),". To uruchomi nasz skrypt, kt\xf3ry wprowadzi dane do bazy danych."]}),"\n",(0,t.jsxs)(e.admonition,{type:"tip",children:[(0,t.jsxs)(e.mdxAdmonitionTitle,{children:["Metoda ",(0,t.jsx)(e.code,{children:"getSiblingDB"})]}),(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"to nie jest standardowy JavaScript, kt\xf3ry znajdziesz w przegl\u0105darce."}),"\n",(0,t.jsxs)(e.li,{children:["to specjalna funkcja dostarczana przez \u015brodowisko ",(0,t.jsx)(e.code,{children:"mongosh"})," (MongoDB Shell)."]}),"\n"]}),(0,t.jsxs)(e.p,{children:["Kiedy uruchamiasz plik za pomoc\u0105 ",(0,t.jsx)(e.code,{children:"mongosh"})," ",(0,t.jsx)(e.code,{children:"scripts/seed.js"}),', MongoDB "opakowuje"\nTw\xf3j kod w swoje w\u0142asne \u015brodowisko.\nTo \u015brodowisko automatycznie udost\u0119pnia globalny obiekt ',(0,t.jsx)(e.code,{children:"db"}),".\n",(0,t.jsx)(e.code,{children:"getSiblingDB"})," jest metod\u0105 tego w\u0142a\u015bnie obiektu.\nMo\u017cna powiedzie\u0107, \u017ce to programistyczny odpowiednik komendy ",(0,t.jsx)(e.code,{children:"use"}),"."]})]})]})}function p(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}},8453:(n,e,a)=>{a.d(e,{R:()=>r,x:()=>s});var o=a(6540);const t={},i=o.createContext(t);function r(n){const e=o.useContext(i);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),o.createElement(i.Provider,{value:e},n.children)}}}]);