"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[9104],{8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>t});var a=i(6540);const s={},d=a.createContext(s);function o(e){const n=a.useContext(d);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(d.Provider,{value:n},e.children)}},9098:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"MongoDB/OperatoryAktualizacji","title":"Operatory aktualizacji","description":"| Operator    | Znaczenie / Opis                                        | Przyk\u0142ad u\u017cycia                                                        |","source":"@site/docs/4. MongoDB/40.OperatoryAktualizacji.mdx","sourceDirName":"4. MongoDB","slug":"/MongoDB/OperatoryAktualizacji","permalink":"/web/docs/MongoDB/OperatoryAktualizacji","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/4. MongoDB/40.OperatoryAktualizacji.mdx","tags":[],"version":"current","sidebarPosition":40,"frontMatter":{"title":"Operatory aktualizacji"},"sidebar":"tutorialSidebar","previous":{"title":"Operatory logiczne","permalink":"/web/docs/MongoDB/OperatoryLogiczne"},"next":{"title":"Projekcja","permalink":"/web/docs/MongoDB/ProjekcjaIFiltrowanie"}}');var s=i(4848),d=i(8453);const o={title:"Operatory aktualizacji"},t="Operatory aktualizacji (Update Operator)",r={},c=[{value:"Przygotowanie bazy danych",id:"przygotowanie-bazy-danych",level:2},{value:"Zapytania",id:"zapytania",level:2},{value:"Ania przenios\u0142a si\u0119 z Olsztyna do Krakowa",id:"ania-przenios\u0142a-si\u0119-z-olsztyna-do-krakowa",level:3},{value:"Bartek zdobywa dodatkowe 50 punkt\xf3w",id:"bartek-zdobywa-dodatkowe-50-punkt\xf3w",level:3},{value:"Celina nie b\u0119dzie mia\u0142a pola &quot;premium&quot;",id:"celina-nie-b\u0119dzie-mia\u0142a-pola-premium",level:3},{value:"Zamieniamy w dokumentach pole &quot;score&quot; na pole &quot;points&quot;",id:"zamieniamy-w-dokumentach-pole-score-na-pole-points",level:3},{value:"Bartek przesta\u0142 interesowa\u0107 si\u0119 samochodami",id:"bartek-przesta\u0142-interesowa\u0107-si\u0119-samochodami",level:3},{value:"Celina przestaje podr\xf3\u017cowa\u0107, a Ania czyta\u0107",id:"celina-przestaje-podr\xf3\u017cowa\u0107-a-ania-czyta\u0107",level:3},{value:"Ania dodaje do swoich hobby &quot;coding&quot;",id:"ania-dodaje-do-swoich-hobby-coding",level:3},{value:"Pomna\u017camy wszystkim u\u017cytkownikom punkty 1.1",id:"pomna\u017camy-wszystkim-u\u017cytkownikom-punkty-11",level:3},{value:"Odm\u0142adzamy staruch\xf3w, m\u0142odzieniaszk\xf3w pozostawiamy",id:"odm\u0142adzamy-staruch\xf3w-m\u0142odzieniaszk\xf3w-pozostawiamy",level:3},{value:"Podci\u0105gamy s\u0142abeusz\xf3w do 180 punkt\xf3w",id:"podci\u0105gamy-s\u0142abeusz\xf3w-do-180-punkt\xf3w",level:3},{value:"Zadania",id:"zadania",level:2}];function l(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsxs)(n.h1,{id:"operatory-aktualizacji-update-operator",children:["Operatory aktualizacji (",(0,s.jsx)(n.em,{children:"Update Operator"}),")"]})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Operator"}),(0,s.jsx)(n.th,{children:"Znaczenie / Opis"}),(0,s.jsx)(n.th,{children:"Przyk\u0142ad u\u017cycia"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"$set"})}),(0,s.jsx)(n.td,{children:"ustawia lub nadpisuje warto\u015b\u0107 pola"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'db.users.updateOne({name:"Joe"}, { $set: {age: 25} })'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"$inc"})}),(0,s.jsx)(n.td,{children:"zwi\u0119ksza lub zmniejsza warto\u015b\u0107 liczbow\u0105 pola"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"db.users.updateMany({}, { $inc: {age: 1} })"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"$unset"})}),(0,s.jsx)(n.td,{children:"usuwa pole z dokumentu"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'db.users.updateOne({_id: id}, { $unset: {city: ""} })'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"$rename"})}),(0,s.jsx)(n.td,{children:"zmienia nazw\u0119 pola"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'db.users.updateMany({}, { $rename: {"age": "wiek"} })'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"$push"})}),(0,s.jsx)(n.td,{children:"dodaje element do tablicy"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'db.users.updateOne({name:"Joe"}, { $push: {hobbies: "gaming"} })'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"$pull"})}),(0,s.jsx)(n.td,{children:"usuwa element z tablicy (je\u015bli spe\u0142nia warunek)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'db.users.updateOne({name:"Joe"}, { $pull: {hobbies: "gaming"} })'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"$pop"})}),(0,s.jsxs)(n.td,{children:["usuwa ostatni (",(0,s.jsx)(n.code,{children:"1"}),") lub pierwszy (",(0,s.jsx)(n.code,{children:"-1"}),") element tablicy"]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'db.users.updateOne({name:"Joe"}, { $pop: {hobbies: 1} })'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"$addToSet"})}),(0,s.jsxs)(n.td,{children:["dodaje element do tablicy ",(0,s.jsx)(n.strong,{children:"tylko je\u015bli go nie ma"})]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'db.users.updateOne({name:"Joe"}, { $addToSet: {hobbies: "coding"} })'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"$mul"})}),(0,s.jsx)(n.td,{children:"mno\u017cy warto\u015b\u0107 liczbow\u0105 pola"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"db.products.updateOne({_id: id}, { $mul: {price: 1.1} })"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"$min"})}),(0,s.jsx)(n.td,{children:"ustawia warto\u015b\u0107 pola, je\u015bli jest mniejsza"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"db.stats.updateOne({_id: id}, { $min: {highscore: 300} })"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"$max"})}),(0,s.jsx)(n.td,{children:"ustawia warto\u015b\u0107 pola, je\u015bli jest wi\u0119ksza"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"db.stats.updateOne({_id: id}, { $max: {highscore: 300} })"})})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"przygotowanie-bazy-danych",children:"Przygotowanie bazy danych"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"use usersDB\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'db.users.insertMany([\n  {\n    name: "Ania",\n    age: 22,\n    city: "Olsztyn",\n    hobbies: ["reading", "running"],\n    score: 120,\n    premium: false\n  },\n  {\n    name: "Bartek",\n    age: 30,\n    city: "Warszawa",\n    hobbies: ["gaming", "cars"],\n    score: 200,\n    premium: true\n  },\n  {\n    name: "Celina",\n    age: 27,\n    city: "Gda\u0144sk",\n    hobbies: ["music", "yoga", "travel"],\n    score: 150,\n    premium: false\n  }\n])\n'})}),"\n",(0,s.jsx)(n.h2,{id:"zapytania",children:"Zapytania"}),"\n",(0,s.jsx)(n.h3,{id:"ania-przenios\u0142a-si\u0119-z-olsztyna-do-krakowa",children:"Ania przenios\u0142a si\u0119 z Olsztyna do Krakowa"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:'db.users.updateOne({name: "Ania"}, {$set: {city:"Krak\xf3w"}})'})}),"\n",(0,s.jsx)(n.h3,{id:"bartek-zdobywa-dodatkowe-50-punkt\xf3w",children:"Bartek zdobywa dodatkowe 50 punkt\xf3w"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:'db.users.updateOne({name: "Bartek"}, {$inc: {score: 50}})'})}),"\n",(0,s.jsx)(n.h3,{id:"celina-nie-b\u0119dzie-mia\u0142a-pola-premium",children:'Celina nie b\u0119dzie mia\u0142a pola "premium"'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:'db.users.updateMany({name:"Celina"}, {$unset: {premium: ""}})'})}),"\n",(0,s.jsx)(n.h3,{id:"zamieniamy-w-dokumentach-pole-score-na-pole-points",children:'Zamieniamy w dokumentach pole "score" na pole "points"'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:'db.users.updateMany({}, {$rename: {"score": "points"}})'})}),"\n",(0,s.jsx)(n.h3,{id:"bartek-przesta\u0142-interesowa\u0107-si\u0119-samochodami",children:"Bartek przesta\u0142 interesowa\u0107 si\u0119 samochodami"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:'db.users.updateOne({name:"Bartek"}, {$pull: {hobbies: "cars"}})'})}),"\n",(0,s.jsx)(n.h3,{id:"celina-przestaje-podr\xf3\u017cowa\u0107-a-ania-czyta\u0107",children:"Celina przestaje podr\xf3\u017cowa\u0107, a Ania czyta\u0107"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"1"}),"   - usuwa ostatni element"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-1"}),"  - usuwa pierwszy element"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:'db.users.updateOne({name:"Celina"}, {$pop: {hobbies: 1}})'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:'db.users.updateOne({name:"Ania"}, {$pop: {hobbies: -1}})'})}),"\n",(0,s.jsx)(n.h3,{id:"ania-dodaje-do-swoich-hobby-coding",children:'Ania dodaje do swoich hobby "coding"'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:'db.users.updateOne({name:"Ania"}, {$addToSet: {hobbies: "coding"}})'})}),"\n",(0,s.jsxs)(n.p,{children:['no i jeszcze raz dodajemy do swoich hobbii "coding"\n',(0,s.jsx)(n.code,{children:'db.users.updateOne({name:"Ania"}, {$addToSet: {hobbies: "coding"}})'}),"\nale nic si\u0119 nie dzieje."]}),"\n",(0,s.jsx)(n.h3,{id:"pomna\u017camy-wszystkim-u\u017cytkownikom-punkty-11",children:"Pomna\u017camy wszystkim u\u017cytkownikom punkty 1.1"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"db.users.updateMany({}, {$mul: {points: 1.1}})"})}),"\n",(0,s.jsx)(n.h3,{id:"odm\u0142adzamy-staruch\xf3w-m\u0142odzieniaszk\xf3w-pozostawiamy",children:"Odm\u0142adzamy staruch\xf3w, m\u0142odzieniaszk\xf3w pozostawiamy"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"db.users.updateMany({}, { $min: { age: 25 } })"})}),"\n",(0,s.jsxs)(n.p,{children:['"Ustaw ',(0,s.jsx)(n.code,{children:"age"}),' na 25 tylko wtedy, gdy kto\u015b ma wi\u0119cej ni\u017c 25 lat"']}),"\n",(0,s.jsx)(n.h3,{id:"podci\u0105gamy-s\u0142abeusz\xf3w-do-180-punkt\xf3w",children:"Podci\u0105gamy s\u0142abeusz\xf3w do 180 punkt\xf3w"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"db.users.updateMany({}, {$max: {points: 180}})"})}),"\n",(0,s.jsxs)(n.p,{children:['"Ustaw wszystkim u\u017cytkownikom pole ',(0,s.jsx)(n.code,{children:"points"}),' na warto\u015b\u0107 180,\nale tylko tym, kt\xf3rzy maj\u0105 mniej ni\u017c 180 punkt\xf3w"']}),"\n",(0,s.jsx)(n.h2,{id:"zadania",children:"Zadania"}),"\n",(0,s.jsx)(n.p,{children:"Na nowo zr\xf3b baz\u0119 danych."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Ustaw wszystkim u\u017cytkownikom status premium na true, ale tylko tym, kt\xf3rzy maj\u0105 wi\u0119cej ni\u017c 150 punkt\xf3w.\n(u\u017cyj ",(0,s.jsx)(n.code,{children:"$set"})," + filtr)"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Podnie\u015b wiek wszystkich u\u017cytkownik\xf3w o 2 lata, ale tylko os\xf3b z miasta Olsztyn.\n(u\u017cyj ",(0,s.jsx)(n.code,{children:"$inc"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:['Usu\u0144 z tablicy hobbies wszystkich u\u017cytkownik\xf3w hobby "running".\n(u\u017cyj ',(0,s.jsx)(n.code,{children:"$pull"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:['Dodaj Celinie hobby "cooking", ale tylko je\u015bli jeszcze go nie ma.\n(u\u017cyj ',(0,s.jsx)(n.code,{children:"$addToSet"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:['Ustaw Bartkowi miasto na "Pozna\u0144" i zwi\u0119ksz mu punkty o 20 w ramach jednej aktualizacji.\n(u\u017cyj ',(0,s.jsx)(n.code,{children:"$set"})," + ",(0,s.jsx)(n.code,{children:"$inc"})," w tym samym update)"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Usu\u0144 pole premium wszystkim u\u017cytkownikom, kt\xf3rzy maj\u0105 mniej ni\u017c 100 punkt\xf3w.\n(u\u017cyj ",(0,s.jsx)(n.code,{children:"$unset"})," + filtr)"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Zmie\u0144 nazw\u0119 pola points na score tylko u u\u017cytkownik\xf3w premium.\n(u\u017cyj ",(0,s.jsx)(n.code,{children:"$rename"})," + filtr)"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Pomn\xf3\u017c wszystkim u\u017cytkownikom punkty x 1.2, ale tylko tym, kt\xf3rzy maj\u0105 wi\u0119cej ni\u017c 2 hobby.\n(u\u017cyj ",(0,s.jsx)(n.code,{children:"$mul"})," + warunek na d\u0142ugo\u015b\u0107 tablicy)"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Usu\u0144 pierwsze hobby u ka\u017cdego u\u017cytkownika, kt\xf3ry ma wi\u0119cej ni\u017c 2 elementy w tablicy hobbies.\n(u\u017cyj ",(0,s.jsx)(n.code,{children:"$pop"})," z warto\u015bci\u0105 -1)"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Ustaw minimaln\u0105 warto\u015b\u0107 pola age na 25 dla wszystkich u\u017cytkownik\xf3w, ale nie zmieniaj os\xf3b, kt\xf3re maj\u0105 25 lub wi\u0119cej.\n(u\u017cyj ",(0,s.jsx)(n.code,{children:"$min"}),")"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);