"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[8504],{2386:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>j,frontMatter:()=>s,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"MongoDB/ProjekcjaIFiltrowanie","title":"Projekcja","description":"Teoria","source":"@site/docs/4. MongoDB/50.ProjekcjaIFiltrowanie.mdx","sourceDirName":"4. MongoDB","slug":"/MongoDB/ProjekcjaIFiltrowanie","permalink":"/web/docs/MongoDB/ProjekcjaIFiltrowanie","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/4. MongoDB/50.ProjekcjaIFiltrowanie.mdx","tags":[],"version":"current","sidebarPosition":50,"frontMatter":{"title":"Projekcja"},"sidebar":"tutorialSidebar","previous":{"title":"Operatory aktualizacji","permalink":"/web/docs/MongoDB/OperatoryAktualizacji"},"next":{"title":"Agregacja","permalink":"/web/docs/MongoDB/Agregacja"}}');var c=i(4848),l=i(8453);const s={title:"Projekcja"},d="Projekcja",o={},a=[{value:"Teoria",id:"teoria",level:2},{value:"Przyk\u0142ady",id:"przyk\u0142ady",level:2},{value:"Wy\u015bwietl tylko imi\u0119 i gatunek wszystkich dokument\xf3w",id:"wy\u015bwietl-tylko-imi\u0119-i-gatunek-wszystkich-dokument\xf3w",level:3},{value:"Ukryj pole <code>friends</code>",id:"ukryj-pole-friends",level:3},{value:"Projekcja na tablicach \u2014 tylko jeden przyjaciel Shreka",id:"projekcja-na-tablicach--tylko-jeden-przyjaciel-shreka",level:3},{value:"Znajd\u017a postacie, kt\xf3re maj\u0105 cho\u0107 jednego przyjaciela",id:"znajd\u017a-postacie-kt\xf3re-maj\u0105-cho\u0107-jednego-przyjaciela",level:3},{value:"Wy\u015bwietl tylko imi\u0119 i wiek takiej postaci",id:"wy\u015bwietl-tylko-imi\u0119-i-wiek-takiej-postaci",level:3},{value:"Poka\u017c imi\u0119 i liczb\u0119 przyjaci\xf3\u0142 ka\u017cdej postaci",id:"poka\u017c-imi\u0119-i-liczb\u0119-przyjaci\xf3\u0142-ka\u017cdej-postaci",level:3},{value:"Znajd\u017a postacie, kt\xf3re maj\u0105 dok\u0142adnie 2 przyjaci\xf3\u0142 (wy\u015bwietl tylko imi\u0119 bohatera)",id:"znajd\u017a-postacie-kt\xf3re-maj\u0105-dok\u0142adnie-2-przyjaci\xf3\u0142-wy\u015bwietl-tylko-imi\u0119-bohatera",level:3}];function t(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"projekcja",children:"Projekcja"})}),"\n",(0,c.jsx)(n.h2,{id:"teoria",children:"Teoria"}),"\n",(0,c.jsxs)(n.p,{children:["Funkcja: ",(0,c.jsx)(n.code,{children:"db.collection.find(<filter>, <projection>)"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"filter"}),"      okre\u015bla, kt\xf3re dokumenty pobra\u0107"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"projection"}),"  okre\u015bla, kt\xf3re pola zwr\xf3ci\u0107"]}),"\n"]}),"\n",(0,c.jsxs)(n.admonition,{type:"info",children:[(0,c.jsx)(n.mdxAdmonitionTitle,{children:(0,c.jsx)(n.em,{children:"Projection"})}),(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["to operacja, kt\xf3ra pozwala okre\u015bli\u0107:","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"kt\xf3re pola chcemy zobaczy\u0107,"}),"\n",(0,c.jsx)(n.li,{children:"kt\xf3re pola ukry\u0107,"}),"\n",(0,c.jsx)(n.li,{children:"jak przekszta\u0142ci\u0107 lub obliczy\u0107 nowe pola podczas zwracania danych."}),"\n"]}),"\n"]}),"\n"]}),(0,c.jsxs)(n.p,{children:["Projekcja ",(0,c.jsx)(n.strong,{children:"nie zmienia danych w bazie"})," \u2014 wp\u0142ywa tylko na wynik zapytania."]})]}),"\n",(0,c.jsx)(n.p,{children:"dokument:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'{\n  "_id": 1,\n  "name": "Anna",\n  "age": 22,\n  "email": "anna@example.com"\n}\n'})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"projekcja"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"db.users.find({}, { name: 1, age: 1 })\n"})}),"\n",(0,c.jsx)(n.p,{children:"w y n i k:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'{\n  "name": "Anna",\n  "age": 22\n}\n'})}),"\n",(0,c.jsxs)(n.admonition,{title:"Projekcja vs filtrowanie",type:"tip",children:[(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Filtrowanie = kt\xf3re dokumenty maj\u0105 si\u0119 pojawi\u0107"}),"\n",(0,c.jsx)(n.li,{children:"Projekcja = kt\xf3re pola z tych dokument\xf3w maj\u0105 si\u0119 pojawi\u0107"}),"\n"]}),(0,c.jsx)(n.p,{children:"Filtr       ->  wybiera wiersze/dokumenty\nProjekcja   ->  wybiera kolumny/pola"})]}),"\n",(0,c.jsx)(n.h2,{id:"przyk\u0142ady",children:"Przyk\u0142ady"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Przygotujmy baz\u0119 danych ",(0,c.jsx)(n.code,{children:"cartoon"})," i kolekcj\u0119 ",(0,c.jsx)(n.code,{children:"cartoonCharacters"}),"."]}),"\n",(0,c.jsxs)(n.li,{children:["pracujemy w ",(0,c.jsx)(n.code,{children:"Compass"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u0142\u0105czymy si\u0119 z Mongo"}),"\n",(0,c.jsxs)(n.li,{children:["w po\u0142\u0105czeniu (lewa strona okienka) jest znak ",(0,c.jsx)(n.code,{children:"+"})," dodaj\u0105cy baz\u0119 danych:","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["baza ",(0,c.jsx)(n.code,{children:"cartoon"})]}),"\n",(0,c.jsxs)(n.li,{children:["kolekcja ",(0,c.jsx)(n.code,{children:"cartoonCharacters"})]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["przycisk ",(0,c.jsx)(n.code,{children:"ADD DATA"})," pozwoli nam sformu\u0142owa\u0107 zapytanie ",(0,c.jsx)(n.code,{children:"insert"})," - wklejamy:"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'[\n  {\n    "name": "Shrek",\n    "species": "ogre",\n    "age": 35,\n    "friends": ["Donkey", "Fiona"],\n    "powerLevel": 70\n  },\n  {\n    "name": "Donkey",\n    "species": "donkey",\n    "age": 20,\n    "friends": ["Shrek"],\n    "powerLevel": 40\n  },\n  {\n    "name": "Fiona",\n    "species": "ogre",\n    "age": 30,\n    "friends": ["Shrek", "Donkey"],\n    "powerLevel": 85\n  },\n  {\n    "name": "Puss in Boots",\n    "species": "cat",\n    "age": 10,\n    "friends": ["Shrek", "Donkey"],\n    "powerLevel": 60\n  },\n  {\n    "name": "Gingy",\n    "species": "cookie",\n    "age": 5,\n    "friends": [],\n    "powerLevel": 15\n  }\n]\n'})}),"\n",(0,c.jsx)(n.h3,{id:"wy\u015bwietl-tylko-imi\u0119-i-gatunek-wszystkich-dokument\xf3w",children:"Wy\u015bwietl tylko imi\u0119 i gatunek wszystkich dokument\xf3w"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["mongosh (",(0,c.jsx)(n.code,{children:"Open MongoDB shell"}),"): ",(0,c.jsx)(n.code,{children:"db.chartoonCharacters.find({},{name:1,species:1})"})]}),"\n",(0,c.jsxs)(n.li,{children:["w zak\u0142adce ",(0,c.jsx)(n.code,{children:"Documents"})," mamy oddzielne pola do ",(0,c.jsx)(n.code,{children:"filter"}),", ",(0,c.jsx)(n.code,{children:"projection"}),", ",(0,c.jsx)(n.code,{children:"sort"})," ...","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["w polu ",(0,c.jsx)(n.em,{children:"filter"})," wpisujemy ",(0,c.jsx)(n.code,{children:"{}"})]}),"\n",(0,c.jsxs)(n.li,{children:["w polu ",(0,c.jsx)(n.em,{children:"projection"})," wpisujemy ",(0,c.jsx)(n.code,{children:"{name:1,species:1}"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.h3,{id:"ukryj-pole-friends",children:["Ukryj pole ",(0,c.jsx)(n.code,{children:"friends"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"db.chartoonCharacters.find({},{friends:0})"})}),"\n",(0,c.jsxs)(n.li,{children:["w zak\u0142adce ",(0,c.jsx)(n.code,{children:"Documents"}),":","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"`"}),"\n",(0,c.jsxs)(n.li,{children:["w polu ",(0,c.jsx)(n.em,{children:"projection"})," wpisujemy ",(0,c.jsx)(n.code,{children:"{friends:0}"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"projekcja-na-tablicach--tylko-jeden-przyjaciel-shreka",children:"Projekcja na tablicach \u2014 tylko jeden przyjaciel Shreka"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:'db.chartoonCharacters.find({name: "Shrek"}, {friends: {$slice: 1}, _id: 0})'})}),"\n",(0,c.jsxs)(n.li,{children:["w ",(0,c.jsx)(n.code,{children:"Documents"}),":","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:'{name: "Shrek"}'})}),"\n",(0,c.jsxs)(n.li,{children:["w polu ",(0,c.jsx)(n.em,{children:"projection"})," wpisujemy ",(0,c.jsx)(n.code,{children:"{firends: {$slice: 1}, _id:0}"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"wynik:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"{\n  name: 'Shrek',\n  species: 'ogre',\n  age: 35,\n  friends: [\n    'Donkey'\n  ],\n  powerLevel: 70\n}\n"})}),"\n",(0,c.jsx)(n.admonition,{title:"slice",type:"tip",children:(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"$slice: 1"})," poka\u017c tylko pierwszy element tablicy,"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"$slice: 2"})," poka\u017c dwa pierwsze elementy tablicy,"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"$slice: -1"})," poka\u017c ostatni element tablicy"]}),"\n"]})}),"\n",(0,c.jsx)(n.p,{children:"Zmiana zapytania tak, aby wy\u015bwietla\u0142o si\u0119 tylko imi\u0119 bohatera i jednego przyhaciela:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'db.cartoonCharacters.find(\n  { name: "Shrek" },\n  { name: 1, friends: { $slice: 1 }, _id: 0 }\n)\n'})}),"\n",(0,c.jsx)(n.h3,{id:"znajd\u017a-postacie-kt\xf3re-maj\u0105-cho\u0107-jednego-przyjaciela",children:"Znajd\u017a postacie, kt\xf3re maj\u0105 cho\u0107 jednego przyjaciela"}),"\n",(0,c.jsx)(n.h3,{id:"wy\u015bwietl-tylko-imi\u0119-i-wiek-takiej-postaci",children:"Wy\u015bwietl tylko imi\u0119 i wiek takiej postaci"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.em,{children:"filter"}),": ",(0,c.jsx)(n.code,{children:"{friends: {$exists: true, $ne: []} }"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.em,{children:"projection"}),": ",(0,c.jsx)(n.code,{children:"{name:1,age:1, _id:0}"})]}),"\n"]}),"\n",(0,c.jsxs)(n.admonition,{type:"tip",children:[(0,c.jsxs)(n.mdxAdmonitionTitle,{children:[(0,c.jsx)(n.code,{children:"$exists"})," i ",(0,c.jsx)(n.code,{children:"$ne"})]}),(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{ friends: { $exists: true } }"})," zwr\xf3\u0107 tylko te dokumenty, w kt\xf3rych pole ",(0,c.jsx)(n.code,{children:"friends"})," faktycznie istnieje"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{ friends: { $ne: [] } }"}),":","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["wybierz dokumenty, w kt\xf3rych ",(0,c.jsx)(n.code,{children:"friends"})," nie jest pust\u0105 tablic\u0105"]}),"\n",(0,c.jsxs)(n.li,{children:["je\u017celi dokument nie ma pola ",(0,c.jsx)(n.code,{children:"friends"}),", czyli jest to r\xf3\u017cne od ",(0,c.jsx)(n.code,{children:"[]"}),", to taki dokument b\u0119dzie zwr\xf3cony"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{friends: {$exists: true, $ne: []} }"}),":","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["wybierz dokumenty, kt\xf3re maj\u0105 pole ",(0,c.jsx)(n.code,{children:"friends"})]}),"\n",(0,c.jsx)(n.li,{children:"i z tych dokument\xf3w wybierz tylko te, kt\xf3re maj\u0105 przynajmniej jednego przyjaciela"}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,c.jsx)(n.h3,{id:"poka\u017c-imi\u0119-i-liczb\u0119-przyjaci\xf3\u0142-ka\u017cdej-postaci",children:"Poka\u017c imi\u0119 i liczb\u0119 przyjaci\xf3\u0142 ka\u017cdej postaci"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.em,{children:"filter"}),": ",(0,c.jsx)(n.code,{children:"{}"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.em,{children:"projection"}),": ",(0,c.jsx)(n.code,{children:'{ name: 1, friendsCount: {$size: "$friends"} }'})]}),"\n"]}),"\n",(0,c.jsxs)(n.admonition,{type:"tip",children:[(0,c.jsxs)(n.mdxAdmonitionTitle,{children:[(0,c.jsx)(n.code,{children:"$size"})," i ",(0,c.jsx)(n.code,{children:'"$friends"'})]}),(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"$size"})," operator zwracaj\u0105cy d\u0142ugo\u015b\u0107 tablicy (",(0,c.jsx)(n.em,{children:"per analogiam"})," ",(0,c.jsx)(n.code,{children:"friends.length"}),")"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:'"$friends"'})," odwo\u0142anie do pola ",(0,c.jsx)(n.code,{children:"friends"}),":","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:'"name"'})," to tekst"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:'"$name"'})," to odwo\u0142anie do pola ",(0,c.jsx)(n.code,{children:"name"})]}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,c.jsx)(n.h3,{id:"znajd\u017a-postacie-kt\xf3re-maj\u0105-dok\u0142adnie-2-przyjaci\xf3\u0142-wy\u015bwietl-tylko-imi\u0119-bohatera",children:"Znajd\u017a postacie, kt\xf3re maj\u0105 dok\u0142adnie 2 przyjaci\xf3\u0142 (wy\u015bwietl tylko imi\u0119 bohatera)"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.em,{children:"filter"}),": ",(0,c.jsx)(n.code,{children:"{friends: {$size: 2}}"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.em,{children:"projection"}),": ",(0,c.jsx)(n.code,{children:"{name:1}"})]}),"\n"]})]})}function j(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(t,{...e})}):t(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>d});var r=i(6540);const c={},l=r.createContext(c);function s(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);