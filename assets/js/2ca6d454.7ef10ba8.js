"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[940],{3044:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"MongoDB/Od planu do raportu/Raport","title":"Raport","description":"Wydobywamy warto\u015b\u0107 (analysis.js)","source":"@site/docs/4. MongoDB/110. Od planu do raportu/40.Raport.mdx","sourceDirName":"4. MongoDB/110. Od planu do raportu","slug":"/MongoDB/Od planu do raportu/Raport","permalink":"/web/docs/MongoDB/Od planu do raportu/Raport","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/4. MongoDB/110. Od planu do raportu/40.Raport.mdx","tags":[],"version":"current","sidebarPosition":40,"frontMatter":{"title":"Raport"},"sidebar":"tutorialSidebar","previous":{"title":"Start","permalink":"/web/docs/MongoDB/Od planu do raportu/Start"},"next":{"title":"Wprowadzenie do MERN","permalink":"/web/docs/MERN - Fullstack/Intro MERN"}}');var o=a(4848),i=a(8453);const s={title:"Raport"},t="Czas na raport",d={},c=[{value:"Wydobywamy warto\u015b\u0107 (<code>analysis.js</code>)",id:"wydobywamy-warto\u015b\u0107-analysisjs",level:2},{value:"Cel etapu",id:"cel-etapu",level:2},{value:"Skrypt <code>analysis.js</code>",id:"skrypt-analysisjs",level:2}];function l(n){const e={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"czas-na-raport",children:"Czas na raport"})}),"\n",(0,o.jsxs)(e.h2,{id:"wydobywamy-warto\u015b\u0107-analysisjs",children:["Wydobywamy warto\u015b\u0107 (",(0,o.jsx)(e.code,{children:"analysis.js"}),")"]}),"\n",(0,o.jsx)(e.p,{children:"Dane w bazie s\u0105 jak surowce w magazynie \u2014 same w sobie nie zarabiaj\u0105.\nDopiero gdy potrafisz je przetworzy\u0107 w czytelny raport, dajesz klientowi to, za co Ci p\u0142aci."}),"\n",(0,o.jsx)(e.h2,{id:"cel-etapu",children:"Cel etapu"}),"\n",(0,o.jsx)(e.p,{children:"Napisanie skryptu, kt\xf3ry:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Przeanalizuje zachowania klient\xf3w."}),"\n",(0,o.jsx)(e.li,{children:"Obliczy zyski piekarni."}),"\n",(0,o.jsxs)(e.li,{children:["Wykorzysta Agregacje (",(0,o.jsx)(e.em,{children:"Aggregation Pipelines"}),") do zaawansowanych oblicze\u0144."]}),"\n"]}),"\n",(0,o.jsxs)(e.h2,{id:"skrypt-analysisjs",children:["Skrypt ",(0,o.jsx)(e.code,{children:"analysis.js"})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:'db = db.getSiblingDB(\'cyber_piekarnia\');\n\nprint("\\n--- RAPORT ANALITYCZNY CYBERPIEKARNI ---");\n\n//  Kto u nas jest VIP-em?\nprint("\\n1. Lista naszych klient\xf3w VIP:");\nconst vipy = db.klienci.find({ czy_vip: true }, { login: 1, email: 1, _id: 0 }).toArray();\nprintjson(vipy);\n\n\n//  \u015arednia cena produkt\xf3w wega\u0144skich\nprint("\\n2. Ile \u015brednio kosztuje u nas bu\u0142ka wege?");\nconst sredniaWege = db.produkty.aggregate([\n    { $match: { czy_wege: true } },\n    { $group: { _id: null, sredniaCena: { $avg: "$cena" } } },\n    //{ $set: { sredniaCena: {$round: ["$sredniaCena", 2]}}} // zwraca 10\n    { $set: { sredniaCena: { $trunc: ["$sredniaCena", 2] } } } // zwraca 9.99\n]).toArray();\nprintjson(sredniaWege);\n\n\n// Ile \u0142\u0105cznie zarobili\u015bmy na wszystkich zam\xf3wieniach?\nprint("\\n3. Ca\u0142kowity przych\xf3d z zam\xf3wie\u0144:");\nconst przychod = db.zamowienia.aggregate([\n    { $group: { _id: null, suma: { $sum: "$kwota_koncowa" } } }\n]).toArray();\nprintjson(przychod);\n'})}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Uruchamiamy"})," przez ",(0,o.jsx)(e.code,{children:"mongosh analysis.js"})]}),"\n",(0,o.jsxs)(e.admonition,{type:"tip",children:[(0,o.jsx)(e.mdxAdmonitionTitle,{children:(0,o.jsx)(e.code,{children:"printjson()"})}),(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["to wbudowana funkcja pomocnicza (",(0,o.jsx)(e.em,{children:"Shell Helper"}),") dostarczana przez \u015brodowisko mongosh (",(0,o.jsx)(e.em,{children:"MongoDB Shell"}),")."]}),"\n",(0,o.jsxs)(e.li,{children:["Gdy uruchamiasz skrypt przez ",(0,o.jsx)(e.code,{children:"mongosh"}),", pow\u0142oka ta wstrzykuje do globalnego zasi\u0119gu zestaw narz\u0119dzi\nu\u0142atwiaj\u0105cych prac\u0119 z bazami danych."]}),"\n",(0,o.jsxs)(e.li,{children:["Gdyby\u015b spr\xf3bowa\u0142 uruchomi\u0107 ten sam plik za pomoc\u0105 zwyk\u0142ego polecenia ",(0,o.jsx)(e.code,{children:"node analysis.js"}),",\nterminal wyrzuci\u0142by b\u0142\u0105d: ",(0,o.jsx)(e.code,{children:"ReferenceError: printjson is not defined"}),"."]}),"\n"]})]})]})}function p(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(l,{...n})}):l(n)}},8453:(n,e,a)=>{a.d(e,{R:()=>s,x:()=>t});var r=a(6540);const o={},i=r.createContext(o);function s(n){const e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);