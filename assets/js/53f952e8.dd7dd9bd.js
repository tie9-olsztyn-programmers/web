"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[7218],{8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var s=i(6540);const o={},r=s.createContext(o);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(r.Provider,{value:n},e.children)}},8623:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>m,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"ExpressJS/ModulEvents","title":"Modu\u0142 `events`","description":"Wprowadzenie","source":"@site/docs/3. ExpressJS/10.ModulEvents.mdx","sourceDirName":"3. ExpressJS","slug":"/ExpressJS/ModulEvents","permalink":"/web/docs/ExpressJS/ModulEvents","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/3. ExpressJS/10.ModulEvents.mdx","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"title":"Modu\u0142 `events`"},"sidebar":"tutorialSidebar","previous":{"title":"Wprowadzenie do ExpressJS","permalink":"/web/docs/ExpressJS/Intro"},"next":{"title":"Sockets i modu\u0142 `net`","permalink":"/web/docs/ExpressJS/Socket"}}');var o=i(4848),r=i(8453);const t={title:"Modu\u0142 `events`"},a="Modu\u0142 events",d={},l=[{value:"Wprowadzenie",id:"wprowadzenie",level:2},{value:"Projekt",id:"projekt",level:2},{value:"Pierwszy przyk\u0142ad - &quot;Widzia\u0142em ufo&quot;",id:"pierwszy-przyk\u0142ad---widzia\u0142em-ufo",level:3},{value:"Drugi przyk\u0142ad - &quot;Widzieli ufo&quot;",id:"drugi-przyk\u0142ad---widzieli-ufo",level:3},{value:"Wiele sygna\u0142\xf3\u0153, jedna reakcja",id:"wiele-sygna\u0142\xf3\u0153-jedna-reakcja",level:4},{value:"Jeden sygna\u0142, wiele reakcji",id:"jeden-sygna\u0142-wiele-reakcji",level:4},{value:"Tylko jeden \u015bwiadek ufo - <code>once</code>",id:"tylko-jeden-\u015bwiadek-ufo---once",level:4},{value:"Usuwanie niewygodnych \u015bwiadk\xf3w - <code>off</code>",id:"usuwanie-niewygodnych-\u015bwiadk\xf3w---off",level:4},{value:"W\u0142asny emiter - MissionCtronl",id:"w\u0142asny-emiter---missionctronl",level:2},{value:"Radio mi\u0119dzygalaktyczne",id:"radio-mi\u0119dzygalaktyczne",level:2}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsxs)(n.h1,{id:"modu\u0142-events",children:["Modu\u0142 ",(0,o.jsx)(n.code,{children:"events"})]})}),"\n",(0,o.jsx)(n.h2,{id:"wprowadzenie",children:"Wprowadzenie"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Node.js dzia\u0142a asynchronicznie i reaktywnie"}),"\n",(0,o.jsxs)(n.li,{children:["wiele jego cz\u0119\u015bci opiera si\u0119 na wydarzeniach (",(0,o.jsx)(n.code,{children:"events"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:["ka\u017cdy serwer, strumie\u0144 czy \u017c\u0105danie w Expressie to w\u0142a\u015bnie ",(0,o.jsx)(n.code,{children:"event emitter"})]}),"\n"]}),"\n",(0,o.jsxs)(n.admonition,{type:"note",children:[(0,o.jsxs)(n.mdxAdmonitionTitle,{children:[(0,o.jsx)(n.code,{children:"event"})," (zdarzenie)"]}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["to sygna\u0142, \u017ce co\u015b si\u0119 sta\u0142o - np:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"zako\u0144czono odczyt pliku,"}),"\n",(0,o.jsx)(n.li,{children:"klikni\u0119to przycisk,"}),"\n",(0,o.jsx)(n.li,{children:"odebrano wiadomo\u015b\u0107,"}),"\n",(0,o.jsx)(n.li,{children:"..."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["kto\u015b zdarzenie nadaje (",(0,o.jsx)(n.code,{children:"emit"}),"), a kto\u015b inny subskrybuje (",(0,o.jsx)(n.code,{children:"on"}),")."]}),"\n",(0,o.jsxs)(n.li,{children:["ma\u0142a metafora ",(0,o.jsx)(n.code,{children:"event"})," jest jak :","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"batuta dyrygenta podniesiona do g\xf3ry (rozpocz\u0119cie koncertu)"}),"\n",(0,o.jsx)(n.li,{children:'komenda podczas spektaklu "Kurtyna w g\xf3r\u0119!"'}),"\n",(0,o.jsx)(n.li,{children:"warczenie psa, aby si\u0119 do niego nie zbli\u017ca\u0107"}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,o.jsxs)(n.admonition,{type:"info",children:[(0,o.jsx)(n.mdxAdmonitionTitle,{children:(0,o.jsx)(n.code,{children:"EventEmitter"})}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["obiekt, kt\xf3ry potrafi","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.strong,{children:"emitowa\u0107"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"nas\u0142uchiwa\u0107"})," zdarzenia"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["ma\u0142a metafora - ",(0,o.jsx)(n.code,{children:"EventEmitter"})," jest jak:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:'dyrygent w orkiestrze ("steruje" prac\u0105 muzyk\xf3w)'}),"\n",(0,o.jsx)(n.li,{children:"re\u017cyser podczas spektaklu"}),"\n",(0,o.jsx)(n.li,{children:"pies (mo\u017ce warcze\u0107, cieszy\u0107 si\u0119, pilnowa\u0107 - czyli emitowa\u0107 r\xf3\u017cne zdarzenia)"}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,o.jsx)(n.h2,{id:"projekt",children:"Projekt"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"WebStorm"}),"\n",(0,o.jsx)(n.li,{children:"New Project -> TypeScript"}),"\n",(0,o.jsxs)(n.li,{children:["doinstalujemy:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["typy: ",(0,o.jsx)(n.code,{children:"npm install --save-dev @types/node"})]}),"\n",(0,o.jsxs)(n.li,{children:["ts-node: ",(0,o.jsx)(n.code,{children:"npm install --save-dev ts-node"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["przechodzimy do folderu ",(0,o.jsx)(n.code,{children:"src"})," przez ",(0,o.jsx)(n.code,{children:"cd src"})]}),"\n",(0,o.jsxs)(n.li,{children:["uruchamiamy aplikacj\u0119 ",(0,o.jsx)(n.code,{children:"ts-node index.ts"})]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"pierwszy-przyk\u0142ad---widzia\u0142em-ufo",children:'Pierwszy przyk\u0142ad - "Widzia\u0142em ufo"'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'import {EventEmitter} from "events";\n\nconst emitter = new EventEmitter();\n\n// nas\u0142uchiwanie\nemitter.on("ufo leci", () => {\n    console.log("Chyba widzia\u0142em ufo");\n})\n\n// emitowanie (wywo\u0142ujemy zdarzenie)\nemitter.emit("ufo leci");\n\n\n'})}),"\n",(0,o.jsx)(n.h3,{id:"drugi-przyk\u0142ad---widzieli-ufo",children:'Drugi przyk\u0142ad - "Widzieli ufo"'}),"\n",(0,o.jsx)(n.p,{children:"Zdarzenie z parametrami i nas\u0142uchiwaczami"}),"\n",(0,o.jsx)(n.h4,{id:"wiele-sygna\u0142\xf3\u0153-jedna-reakcja",children:"Wiele sygna\u0142\xf3\u0153, jedna reakcja"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'import {EventEmitter} from "events";\n\nconst emitter = new EventEmitter();\n\n// nas\u0142uchiwanie\nemitter.on("ufo leci", (name: string) => {\n    console.log(`Chyba widzia\u0142em ufo [zg\u0142asza ${name}]`);\n})\n\n// wywo\u0142anie zdarzenia\nemitter.emit("ufo leci", "Szymon");\nemitter.emit("ufo leci", "Genowefa");\nemitter.emit("ufo leci", "Molder")\n\n'})}),"\n",(0,o.jsx)(n.p,{children:"wynik"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"Chyba widzia\u0142em ufo [zg\u0142asza Szymon]\nChyba widzia\u0142em ufo [zg\u0142asza Genowefa]\nChyba widzia\u0142em ufo [zg\u0142asza Molder]\n"})}),"\n",(0,o.jsx)(n.h4,{id:"jeden-sygna\u0142-wiele-reakcji",children:"Jeden sygna\u0142, wiele reakcji"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'import {EventEmitter} from "events";\n\nconst emitter = new EventEmitter();\n\n// nas\u0142uchiwanie\nemitter.on("ufo leci", (name: string) => {\n    console.log(`Chyba widzia\u0142em ufo [zg\u0142asza ${name}]`);\n})\n\nemitter.on("ufo leci", () => {\n    console.log(`Wyr, brum, wyr`);\n})\n\nemitter.on("ufo leci", () => {\n    console.log(`Wzzzziiii`);\n})\n\nemitter.on("ufo leci", () => {\n    console.log(`SSSssssYYyyy`);\n})\n\n// wywo\u0142anie zdarzenia\nemitter.emit("ufo leci", "Mieszko I");\n\n'})}),"\n",(0,o.jsx)(n.p,{children:"wynik:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"Chyba widzia\u0142em ufo [zg\u0142asza Mieszko I]\nWyr, brum, wyr\nWzzzziiii\nSSSssssYYyyy\n"})}),"\n",(0,o.jsxs)(n.h4,{id:"tylko-jeden-\u015bwiadek-ufo---once",children:["Tylko jeden \u015bwiadek ufo - ",(0,o.jsx)(n.code,{children:"once"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'import {EventEmitter} from "events";\n\nconst emitter = new EventEmitter();\n\n// nas\u0142uchiwanie\nemitter.once("ufo leci", (name: string) => {\n    console.log(`Chyba widzia\u0142em ufo [zg\u0142asza ${name}]`);\n})\n\nemitter.emit("ufo leci", "Anatolia");\nemitter.emit("ufo leci", "Pom\u015bcibor"); // to si\u0119 nie wykona\n'})}),"\n",(0,o.jsx)(n.p,{children:"wynik"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"Chyba widzia\u0142em ufo [zg\u0142asza Anatolia]\n"})}),"\n",(0,o.jsxs)(n.h4,{id:"usuwanie-niewygodnych-\u015bwiadk\xf3w---off",children:["Usuwanie niewygodnych \u015bwiadk\xf3w - ",(0,o.jsx)(n.code,{children:"off"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:'import {EventEmitter} from "events";\n\nconst emitter = new EventEmitter();\n\nconst swiadek = (name: string) => {\nconsole.log(`UFO si\u0119 pojawi\u0142o [ zg\u0142asza ${name}]`)\n}\n\n// nas\u0142uchiwanie\nemitter.on("ufo leci", swiadek);\n\nemitter.emit("ufo leci", "M\u0142odziad");\n\nemitter.off("ufo leci", swiadek);\n\n\nemitter.emit("ufo leci", "Nieluba"); // brak odnotowanego zg\u0142oszenia\n\n'})}),"\n",(0,o.jsx)(n.h2,{id:"w\u0142asny-emiter---missionctronl",children:"W\u0142asny emiter - MissionCtronl"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:'import {EventEmitter} from "events";\n\nclass MissionControl extends EventEmitter{\n    startMission(){\n        console.log("Mission started");\n        this.emit("launch")\n    }\n\n    abortMission(){\n        console.log("Error! Mission aborted")\n        this.emit("abort")\n    }\n}\n\n\nconst mission = new MissionControl()\n\nmission.on("launch", () => console.log("Engines started"))\nmission.on("abort", () => console.log("Engines stopped"))\n\nmission.startMission()\nmission.abortMission()\n\n'})}),"\n",(0,o.jsx)(n.h2,{id:"radio-mi\u0119dzygalaktyczne",children:"Radio mi\u0119dzygalaktyczne"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"radio.broadcast()"})," nadanie sygna\u0142u (",(0,o.jsx)(n.code,{children:"emit"}),"),"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:'radio.on("alert")'})," subskrypcja wiadomo\u015bci (",(0,o.jsx)(n.code,{children:"on"}),"),"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"alert"})," nazwa kana\u0142u komunikacyjnego (",(0,o.jsx)(n.code,{children:"event name"}),")."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:'import {EventEmitter} from "events";\n\nclass InterGalacticRadio extends EventEmitter{\n    broadcast(event: string, message: string){\n        console.log(`IRG with message ${message}`);\n        this.emit(event, message);\n    }\n}\n\nconst radio = new InterGalacticRadio()\n\n// s\u0142uchacze\nradio.on(\n    "alert",\n    (message) => console.log(`Pilot received alert: ${message}`))\nradio.on(\n    "alert",\n    (message)=> console.log(`The planet X34/d rcseived alert: ${message}`))\n\n//nadanie sygna\u0142u\nradio.broadcast("alert", "Imperial fleet detected!")\n\n'})})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);